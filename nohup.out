Models package initialized.
Config package initialized.
SceneProcessor package initialized.
Utils package initialized.
SceneConfig package initialized.
SceneProcessorDetail package initialized.
Traceback (most recent call last):
  File "/home/model-server/model-store/code/data_conversation_test/main_api.py", line 1, in <module>
    from models.chatbot_model import ChatbotModel
  File "/home/model-server/model-store/code/data_conversation_test/models/chatbot_model.py", line 8, in <module>
    from scene_processor_detail.deal_three_figures_and_one_table import three_figures_and_one_table
  File "/home/model-server/model-store/code/data_conversation_test/scene_processor_detail/deal_three_figures_and_one_table.py", line 3, in <module>
    from knowledge_graph.kg_api import get_target_node, get_target_aggregation
  File "/home/model-server/model-store/code/data_conversation_test/knowledge_graph/kg_api.py", line 1, in <module>
    import networkx as nx
ModuleNotFoundError: No module named 'networkx'
Models package initialized.
Config package initialized.
SceneProcessor package initialized.
Utils package initialized.
SceneConfig package initialized.
SceneProcessorDetail package initialized.
/home/model-server/model-store/code/data_conversation_test
INFO:     Started server process [454625]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:7071 (Press CTRL+C to quit)
--------------------------------------------------------------------
请求LLM的完整问题: 有下面多种场景，需要你根据用户输入选择最合适的一个，只答选项
0. 用户意图不是分析、查询和统计数据 - 请回复0
1. 用户输入的句子含有以下关键词或它们的同义词:汇总、同比、环比，注意不包含'对比'，或其他查询 - 请回复1
2. --------- - 请回复2
3.  - 请回复3
4. 含有以下关键词或同义词: 波动、变动、变化、归因、变化情况、变动情况，想要进行数据的波动分析 - 请回复4
5. 含有以下关键词或同义词: 趋势，想要查看数据的趋势图 - 请回复5
6. 含有以下关键词或同义词: 比较、对比、排名，想要查看数据的柱状图 - 请回复6
7. 含有以下关键词或同义词: 占比、比例、分布 - 请回复7
8. --------- - 请回复8
9. 用户想要查询产品的合格率，输入的句子含有一下关键词：产品、合格率、合格的百分比。例：根据来源统计2023年抽查为合格的百分比 - 请回复9
10. 用户意图想要进行抽奖，输入的句子含有以下关键词或它们的同义词:抽奖、x等奖。 - 请回复10
用户输入：查询1-7月特殊病(医院)
请回复序号：
----------------------------------
LLM输出: 1
--------------------------------------------------------------------
用时 0.9100918769836426 秒: 基于LLM意图识别
模型匹配了场景：三图一表
句子中存在且可能的group词： []
--------------------------------------------------------------------
请求LLM的完整问题: <|system|>你是个分词分类系统,请你进行文本分词分类任务,给你一句话,拆分出其中的时间time,和名词或者形容词key,请对之后所有问题进行分词分类。
        下面是一些例子:
        问题:去年1月和5月的总费用->{"key":["总费用"],"time":[["2023-01"],["2023-05"]]}
        问题:2023年1月到3月的总费用的医疗类型->{"key":["总费用","医疗类型"],"time":[["2023-01","2023-03"]]}
        问题:2023年3月到5月东海县职工特殊病统筹基金费用合计统计->{"key":["东海县","职工","特殊病","统筹基金","费用","合计"],"time":[["2023-03","2023-05"]]}
        问题:2023年1月至9月居民特殊病费用合计统计->{"key":["东海县","居民","特殊病","费用","合计"],"time":[["2023-01","2023-09"]]}
        问题:前年1月到2023年2月灌云县特殊病费用合计统计->{"key":["特殊病","费用","灌云县","合计"],"time":[["2022-01","2023-02"]]}
        问题:去年4月到7月赣榆区险种费用合计统计->{"key":["赣榆区","险种","费用","合计"],"time":[["2023-04","2023-07"]]}
        问题:去年1月到2023年8月灌云县费用合计统计->{"key":["灌云县","费用","合计"],"time":[["2023-01","2023-08"]]}
        问题:去年1月到7月灌云县费用合计统计->{"key":["灌云县","费用","合计"],"time":[["2023-01","2023-07"]]}
        问题:前年1月到8月市本级职工退休费用合计统计->{"key":["市本级","职工退休","费用","合计"],"time":[["2022-01","2022-08"]]}
        问题:第一季度公务员补助统筹基金合计统计->{"key":["公务员补助","统筹基金","合计"],"time":[["2024-01","2024-03"]]}
        问题:2023年1月和4月人民医院职工特殊病总费用合计统计->{"key":["人民医院","职工","特殊病","总费用","合计"],"time":[["2023-01"],["2023-04"]]}
        问题:前三季度统计特殊病合计->{"key":["特殊病","合计"],"time":[["2024-01","2024-09"]]}
        问题:2023年前2季度透析总费用统计->{"key":["透析","总费用"],"time":[["2023-01","2023-06"]]}
        问题:第三季度透析账户合计统计->{"key":["透析","账户","合计"],"time":["2024-07","2024-09"]]}
        问题:查询2023年5月和8月各的统筹基金类别->{"key":["统筹基金"],"time":[["2023-05"],["2023-08"]]}
        问题:2023年1月-9月各各不同的特殊病统筹基金支出费用->{"key": ["特殊病", "统筹基金","支出费用"], "time":[["2023-01", "2023-09"]]}
        问题:请分析有关2023年前二季度特殊病统筹基金费用根据汇总->{"key":["特殊病","统筹基金","费用"],"time":[["2023-01","2023-06"]]}
        问题:请给出2023年各特殊病的职工医保基金支出金额按照度汇总->{"key": ["特殊病", "职工","医保基金"], "time":[["2023-01","2023-12"]]}
        问题:查询1月和7月职工特殊病统筹基金合计及分析>{"key": ["职工","特殊病","统筹基金","合计"], "time":[["2024-01","2024-07"]]}
        问题:2月到6月医院特殊病账户合计统计->{"key":["医院","特殊病","账户","合计"],"time":[["2024-02","2024-06"]]}
        问题:查询今年1月到7月东海县职工特殊病统筹基金->{"key": ["东海县","职工","特殊病", "统筹基金"], "time":[["2024-01","2024-07"]]}规则: 
        key:分词，去除时间之后分成合适的关键词。['特殊病']是key里面可能出现的词。
        time:按照yyyy-mm格式输出，时间范围输出起始时间和结束时间两个值在一个list,时间列表则每个时间在一个list,当前日期是：2024-01-26,如果只有月份，默认为2024年
        group:构造sql查询语句时的分组条件，不存在该种类型的词可不抽取。[]是group里面可能出现的词。
        不可新增类型，只能按json格式返回{"key":[],"time":[[]],"group":[]}输出,词不可重复选取。
        time必须是二维列表，如果出现x月到y月表示范围，则time形式为->"time":[[x,y]],如果出现x月和y月表示并列，则time形式为->"time":[[x],[y]],
        下面是问题：查询1-7月特殊病(医院)
----------------------------------
LLM输出: {"key":["特殊病","医院"],"time":[["2024-01","2024-07"]]}
--------------------------------------------------------------------
用时 2.8431713581085205 秒: 基于LLM信息抽取
--知识图谱获得的目标节点： ['共济账户', '账户支付数', '现金', '公务员补助', '医院名称计数', '大病保险', '大额医疗补助', '统筹基金', '医院等级计数', '数据条数', '统筹区计数', '险种计数', '民政补助', '就医地计数', '总费用', '病种计数', '人员类别计数', '其他基金支付']
result:  {'type': '2', 'value': {'key': []}, 'context': '你想查询哪些指标呢？例如 共济账户，账户支付数，现金，公务员补助，医院名称计数，大病保险，大额医疗补助，统筹基金，医院等级计数，数据条数，统筹区计数，险种计数，民政补助，就医地计数，总费用，病种计数，人员类别计数，其他基金支付', 'history': []}
INFO:     172.17.0.1:47440 - "POST /v1/chat/completions?timestamp=1706253250470 HTTP/1.0" 200 OK
